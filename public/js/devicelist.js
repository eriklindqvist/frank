// Generated by CoffeeScript 1.10.0
var DeviceList, div;

div = React.DOM.div;

DeviceList = React.createClass({
  getInitialState: function() {
    return {
      data: []
    };
  },
  componentDidMount: function() {
    return $.ajax({
      url: this.props.url,
      dataType: 'json',
      success: (function(data) {
        return this.setState({
          data: data
        });
      }).bind(this),
      error: (function(xhr, status, err) {
        return console.error(this.props.url, status, err.toString());
      }).bind(this)
    });
  },
  render: function() {
    var deviceNodes;
    deviceNodes = this.state.data.map(function(device) {
      return React.createElement(Device, {
        name: device.name,
        status: device.status
      });
    });
    console.log(deviceNodes);
    return div({
      className: 'deviceList'
    }, deviceNodes);
  }
});

$('body').append($('<div id="devices">'));

ReactDOM.render(React.createElement(DeviceList, {
  url: '/devices'
}), document.getElementById('devices'));
